"""
Greek Radio Stream URL Extractor
=================================
This script visits each live24.gr station page and extracts the real
stream URL from the hidden JavaScript config (the `streamsrc` field).

HOW TO RUN:
  1. Make sure Python 3 is installed
  2. Install requests:  pip install requests
  3. Run:  python extract_streams.py
  4. Results saved to:  streams_found.json  and  streams_found.txt

The script is polite — it waits 0.8 seconds between requests.
"""

import requests, re, json, time, sys

HEADERS = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) '
                  'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
    'Accept-Language': 'el-GR,el;q=0.9,en;q=0.8',
    'Referer': 'https://live24.gr/',
}

# ── All SID-based stations from gid=24 (International) and gid=25 (Greek) ──
STATIONS = [
    # International (gid=24)
    {"name": "02 Dance Radio",           "sid": 4127, "tab": "int"},
    {"name": "100.6 Kiss FM",            "sid": 567,  "tab": "int"},
    {"name": "111 Radio",                "sid": 2434, "tab": "int"},
    {"name": "1431 AM",                  "sid": 2320, "tab": "int"},
    {"name": "24-7 Radio.us",            "sid": 1848, "tab": "int"},
    {"name": "4Life Radio",              "sid": 3424, "tab": "int"},
    {"name": "80sMania Radio",           "sid": 2910, "tab": "int"},
    {"name": "88μισό 88.5",              "sid": 253,  "tab": "int"},
    {"name": "89 Rainbow 89",            "sid": 254,  "tab": "int"},
    {"name": "90s All Time Greatest",    "sid": 3186, "tab": "int"},
    {"name": "90s Heaven Web Radio",     "sid": 3570, "tab": "int"},
    {"name": "98.6",                     "sid": 3916, "tab": "int"},
    {"name": "A 100 FM 107.4",           "sid": 1700, "tab": "int"},
    {"name": "Action Radio 98.2",        "sid": 1595, "tab": "int"},
    {"name": "Active Radio",             "sid": 3425, "tab": "int"},
    {"name": "AK Radio",                 "sid": 1650, "tab": "int"},
    {"name": "Aktina Radio 95.0",        "sid": 821,  "tab": "int"},
    {"name": "Albedo 14 Radio",          "sid": 2630, "tab": "int"},
    {"name": "Alfa Radio 96",            "sid": 1068, "tab": "int"},
    {"name": "All 60s Radio",            "sid": 3488, "tab": "int"},
    {"name": "All 70s Radio",            "sid": 3489, "tab": "int"},
    {"name": "All Hits Zone",            "sid": 3185, "tab": "int"},
    {"name": "All Time 70s 80s",         "sid": 2741, "tab": "int"},
    {"name": "Allgood Radio",            "sid": 4105, "tab": "int"},
    {"name": "Andromeda NET Radio",      "sid": 1343, "tab": "int"},
    {"name": "Antennes Radio 93.6",      "sid": 2534, "tab": "int"},
    {"name": "Anyway Deep Radio",        "sid": 1942, "tab": "int"},
    {"name": "Anyway Fresh Radio",       "sid": 3518, "tab": "int"},
    {"name": "Apolis Radio",             "sid": 4097, "tab": "int"},
    {"name": "Apollon FM 98.1",          "sid": 1760, "tab": "int"},
    {"name": "Aqua Radio The 80s",       "sid": 2854, "tab": "int"},
    {"name": "Aroto Instrumental",       "sid": 2861, "tab": "int"},
    {"name": "Art FM 102.7",             "sid": 2228, "tab": "int"},
    {"name": "Art FM 103.1",             "sid": 3443, "tab": "int"},
    {"name": "Athens DJ 95.2",           "sid": 1322, "tab": "int"},
    {"name": "Athens Free Radio",        "sid": 3794, "tab": "int"},
    {"name": "Athens Metro Mall Radio",  "sid": 2559, "tab": "int"},
    {"name": "Athens Party",             "sid": 2595, "tab": "int"},
    {"name": "Athens Radio Master",      "sid": 3573, "tab": "int"},
    {"name": "Athens Radio Trance",      "sid": 2769, "tab": "int"},
    {"name": "Athikia Disco FM",         "sid": 4000, "tab": "int"},
    {"name": "Audiophile Baroque",       "sid": 2831, "tab": "int"},
    {"name": "Audiophile Rock/Blues",    "sid": 2796, "tab": "int"},
    {"name": "Auto Pilot Radio",         "sid": 2387, "tab": "int"},
    {"name": "Avanti 97.7",              "sid": 1489, "tab": "int"},
    {"name": "Avanti Classic",           "sid": 2943, "tab": "int"},
    {"name": "Avanti FM 107.6",          "sid": 183,  "tab": "int"},
    {"name": "Bach Radio",               "sid": 2937, "tab": "int"},
    {"name": "Baila Radio",              "sid": 4010, "tab": "int"},
    {"name": "Bangee Radio",             "sid": 2822, "tab": "int"},
    {"name": "Be Radio",                 "sid": 2642, "tab": "int"},
    {"name": "Beethoven Radio",          "sid": 2827, "tab": "int"},
    {"name": "Believe Radio",            "sid": 3362, "tab": "int"},
    {"name": "Best FM 97.3",             "sid": 863,  "tab": "int"},
    {"name": "Best Radio 94.7",          "sid": 1143, "tab": "int"},
    {"name": "Beton7 Art Radio",         "sid": 1677, "tab": "int"},
    {"name": "BFBS Cyprus 89.7",         "sid": 2737, "tab": "int"},
    {"name": "Black Duck Radio",         "sid": 2410, "tab": "int"},
    {"name": "Bocca Radio",              "sid": 3313, "tab": "int"},
    {"name": "Boem Radio",               "sid": 2220, "tab": "int"},
    {"name": "Boo Radio",                "sid": 2920, "tab": "int"},
    {"name": "Box Radio",                "sid": 3876, "tab": "int"},
    {"name": "Buddha Radio",             "sid": 3991, "tab": "int"},
    {"name": "Buddy Radio",              "sid": 4056, "tab": "int"},
    {"name": "Bur Radio",                "sid": 3079, "tab": "int"},
    {"name": "Cadillac Records Radio",   "sid": 2877, "tab": "int"},
    {"name": "Camara Radio",             "sid": 3643, "tab": "int"},
    {"name": "Cannibal Radio",           "sid": 1661, "tab": "int"},
    {"name": "Capital 104.8",            "sid": 3245, "tab": "int"},
    {"name": "Capital FM 107",           "sid": 1649, "tab": "int"},
    {"name": "Capital Radio 90.7",       "sid": 1210, "tab": "int"},
    {"name": "Cavo Paradiso Radio",      "sid": 2792, "tab": "int"},
    {"name": "CFM 99.9",                 "sid": 3656, "tab": "int"},
    {"name": "Chania Radio 99.6",        "sid": 3594, "tab": "int"},
    {"name": "Chez Gabriel Radio",       "sid": 3851, "tab": "int"},
    {"name": "Chillout TreePines",       "sid": 3439, "tab": "int"},
    {"name": "Chimeres Radio",           "sid": 2981, "tab": "int"},
    {"name": "Choice FM 104.3",          "sid": 2714, "tab": "int"},
    {"name": "Cinar FM 91.8",            "sid": 2501, "tab": "int"},
    {"name": "Cinnamon Radio Deep",      "sid": 4156, "tab": "int"},
    {"name": "Cinnamon Radio Easy",      "sid": 4157, "tab": "int"},
    {"name": "City Faces Radio",         "sid": 2453, "tab": "int"},
    {"name": "City FM 92",               "sid": 613,  "tab": "int"},
    {"name": "City FM 100",              "sid": 1157, "tab": "int"},
    {"name": "City FM 103.8",            "sid": 1415, "tab": "int"},
    {"name": "Classic Old Time Radio",   "sid": 4008, "tab": "int"},
    {"name": "Classic-99",               "sid": 4101, "tab": "int"},
    {"name": "Clearjet Radio",           "sid": 3820, "tab": "int"},
    {"name": "Click Radio",              "sid": 3634, "tab": "int"},
    {"name": "Clubaki Web Radio",        "sid": 3547, "tab": "int"},
    {"name": "Clubradiofm",              "sid": 4200, "tab": "int"},
    {"name": "Cocktail Web Radio",       "sid": 3824, "tab": "int"},
    {"name": "Coffee Web Radio",         "sid": 2785, "tab": "int"},
    {"name": "Coni-OnAir Radio",         "sid": 1696, "tab": "int"},
    {"name": "Contact Radio",            "sid": 3608, "tab": "int"},
    {"name": "Cool FM 90.7",             "sid": 694,  "tab": "int"},
    {"name": "Cool FM 106.8",            "sid": 1225, "tab": "int"},
    {"name": "Cool FM.eu",               "sid": 41,   "tab": "int"},
    {"name": "CoolFM.eu Soft",           "sid": 2057, "tab": "int"},
    {"name": "Cosmos 93.2",              "sid": 951,  "tab": "int"},
    {"name": "Cosmos 97.1",              "sid": 900,  "tab": "int"},
    {"name": "Crystal Radio Athens",     "sid": 3867, "tab": "int"},
    {"name": "Cult Radio 99.8",          "sid": 2882, "tab": "int"},
    {"name": "Cut-Radio 95.2",           "sid": 3152, "tab": "int"},
    {"name": "Cyprus Funk Station",      "sid": 2904, "tab": "int"},
    {"name": "D Radio",                  "sid": 1727, "tab": "int"},
    {"name": "D-code 96.2",              "sid": 1251, "tab": "int"},
    {"name": "Dance waves",              "sid": 1673, "tab": "int"},
    {"name": "DeeJay Corfu 97.5",        "sid": 536,  "tab": "int"},
    {"name": "DeeJay Radio Κύπρου 93.5", "sid": 2707, "tab": "int"},
    {"name": "DeeJay Βόλος 104.5",       "sid": 2544, "tab": "int"},
    {"name": "Deep Motion FM",           "sid": 1362, "tab": "int"},
    {"name": "Deep Web Radio",           "sid": 3791, "tab": "int"},
    {"name": "Deepin Radio",             "sid": 2965, "tab": "int"},
    {"name": "DGradio One",              "sid": 3302, "tab": "int"},
    {"name": "Dice Radio",               "sid": 2644, "tab": "int"},
    {"name": "Disco 80s Radio",          "sid": 1593, "tab": "int"},
    {"name": "Disco Cafe",               "sid": 3639, "tab": "int"},
    {"name": "Disco FM",                 "sid": 3038, "tab": "int"},
    {"name": "Disco Net Radio Athens",   "sid": 3524, "tab": "int"},
    {"name": "Discomania",               "sid": 1410, "tab": "int"},
    {"name": "Diva FM 91.6",             "sid": 996,  "tab": "int"},
    {"name": "Dj Power Music",           "sid": 4027, "tab": "int"},
    {"name": "Dj Yanni Radio",           "sid": 2212, "tab": "int"},
    {"name": "Dj Λαμία 91.2",            "sid": 2883, "tab": "int"},
    {"name": "Dolce Radio",              "sid": 1856, "tab": "int"},
    {"name": "Dream 96.9",               "sid": 90,   "tab": "int"},
    {"name": "Dream Radio 88.1",         "sid": 3336, "tab": "int"},
    {"name": "DreamCity WebRadio",       "sid": 1978, "tab": "int"},
    {"name": "Dromos FM Κύπρου",         "sid": 1674, "tab": "int"},
    {"name": "DRS FM 95.3",              "sid": 1426, "tab": "int"},
    {"name": "Easy 93.2",                "sid": 1861, "tab": "int"},
    {"name": "Easy 105.3",               "sid": 238,  "tab": "int"},
    {"name": "Echoes Radio",             "sid": 2598, "tab": "int"},
    {"name": "Eclectic Radio",           "sid": 2240, "tab": "int"},
    {"name": "EcoBeat Gr",               "sid": 4036, "tab": "int"},
    {"name": "Edit Radio",               "sid": 2990, "tab": "int"},
    {"name": "EF-EM Radio 99",           "sid": 2736, "tab": "int"},
    {"name": "Elegant Radio",            "sid": 3866, "tab": "int"},
    {"name": "eMusic Site",              "sid": 4204, "tab": "int"},
    {"name": "Energy 94.2",              "sid": 581,  "tab": "int"},
    {"name": "ENERGY 93.4",              "sid": 1436, "tab": "int"},
    {"name": "Energy 101.5",             "sid": 3431, "tab": "int"},
    {"name": "Energy FM 88.9",           "sid": 2756, "tab": "int"},
    {"name": "Enfo Radio",               "sid": 3262, "tab": "int"},
    {"name": "Envy Radio",               "sid": 3236, "tab": "int"},
    {"name": "Escapula Radio",           "sid": 3238, "tab": "int"},
    {"name": "Essential Mix Radio",      "sid": 3625, "tab": "int"},
    {"name": "Eternal Radio",            "sid": 3157, "tab": "int"},
    {"name": "Eurovision Song Contest",  "sid": 3224, "tab": "int"},
    {"name": "EXIT radio",               "sid": 3520, "tab": "int"},
    {"name": "EyeOnYou Radio",           "sid": 2959, "tab": "int"},
    {"name": "Fame Radio",               "sid": 2556, "tab": "int"},
    {"name": "Feelings Radio",           "sid": 2998, "tab": "int"},
    {"name": "Figaro Radio",             "sid": 3659, "tab": "int"},
    {"name": "Fire radio",               "sid": 2480, "tab": "int"},
    {"name": "Flashback Radio",          "sid": 2994, "tab": "int"},
    {"name": "Fly 104",                  "sid": 299,  "tab": "int"},
    {"name": "Fly FM 88.1",              "sid": 2398, "tab": "int"},
    {"name": "Fly FM 89.7",              "sid": 839,  "tab": "int"},
    {"name": "FM Life 105.3",            "sid": 407,  "tab": "int"},
    {"name": "Focus FM 103.6",           "sid": 2001, "tab": "int"},
    {"name": "Folegandros Radio",        "sid": 3409, "tab": "int"},
    {"name": "Forever 96.3",             "sid": 1052, "tab": "int"},
    {"name": "Freestyle Radio 97.2",     "sid": 3276, "tab": "int"},
    {"name": "Fresh 92.9",               "sid": 1000, "tab": "int"},
    {"name": "Fresh 105",                "sid": 3390, "tab": "int"},
    {"name": "Fresh web Radio",          "sid": 2784, "tab": "int"},
    {"name": "Frisky radio",             "sid": 2477, "tab": "int"},
    {"name": "G Radio",                  "sid": 1750, "tab": "int"},
    {"name": "Galaxy 106.1",             "sid": 781,  "tab": "int"},
    {"name": "Geranymo Groovy",          "sid": 3572, "tab": "int"},
    {"name": "Ghost Radio",              "sid": 2885, "tab": "int"},
    {"name": "Ginge Radio",              "sid": 1886, "tab": "int"},
    {"name": "GLOBAL MUSIC RADIO",       "sid": 4205, "tab": "int"},
    {"name": "Gods Cafe Radio",          "sid": 3028, "tab": "int"},
    {"name": "Gold Radio",               "sid": 3180, "tab": "int"},
    {"name": "GRD Terra Radio",          "sid": 3754, "tab": "int"},
    {"name": "Greek New Age Radio",      "sid": 1994, "tab": "int"},
    {"name": "Greek Otaku Radio",        "sid": 2803, "tab": "int"},
    {"name": "Greek Web Radio",          "sid": 2616, "tab": "int"},
    {"name": "Greekradio web Channel",   "sid": 4196, "tab": "int"},
    {"name": "Groove Radio",             "sid": 1713, "tab": "int"},
    # Greek (gid=25)
    {"name": "ANT1 Radio 94.0",          "sid": 1652, "tab": "gr"},
    {"name": "1ο Ερασιτεχνικό",          "sid": 3440, "tab": "gr"},
    {"name": "2DAY 104.5",               "sid": 1569, "tab": "gr"},
    {"name": "2MM Web Radio",            "sid": 2674, "tab": "gr"},
    {"name": "926 FM 92.6",              "sid": 15,   "tab": "gr"},
    {"name": "Action Radio",             "sid": 3660, "tab": "gr"},
    {"name": "Adelin 107.3",             "sid": 2565, "tab": "gr"},
    {"name": "aiwaves",                  "sid": 2072, "tab": "gr"},
    {"name": "Alpha FM 104.7",           "sid": 1506, "tab": "gr"},
    {"name": "Angel 102.8",              "sid": 139,  "tab": "gr"},
    {"name": "Apollon FM 98.1",          "sid": 1760, "tab": "gr"},
    {"name": "Apps Radio 96.6",          "sid": 2789, "tab": "gr"},
    {"name": "Aria FM 107.4",            "sid": 605,  "tab": "gr"},
    {"name": "Arion Στιγμές",            "sid": 2592, "tab": "gr"},
    {"name": "ArtFM Radio",              "sid": 2927, "tab": "gr"},
    {"name": "Astra FM 97.3",            "sid": 164,  "tab": "gr"},
    {"name": "Astra FM 99.2",            "sid": 939,  "tab": "gr"},
    {"name": "Avena 97.7",               "sid": 2478, "tab": "gr"},
    {"name": "Baby Radio",               "sid": 4066, "tab": "gr"},
    {"name": "Barack Radio",             "sid": 4011, "tab": "gr"},
    {"name": "Best Radio 103.9",         "sid": 849,  "tab": "gr"},
    {"name": "Ble.FM 92.5",              "sid": 2458, "tab": "gr"},
    {"name": "Blue Greece Radio",        "sid": 2732, "tab": "gr"},
    {"name": "Brake FM 100.8",           "sid": 829,  "tab": "gr"},
    {"name": "Bravo FM 89.6",            "sid": 551,  "tab": "gr"},
    {"name": "B-Side Radio",             "sid": 4124, "tab": "gr"},
    {"name": "BueStar FM 105.1",         "sid": 1906, "tab": "gr"},
    {"name": "Campos 97.8",              "sid": 166,  "tab": "gr"},
    {"name": "Chicago Greek Radio",      "sid": 2830, "tab": "gr"},
    {"name": "Cocktail FM 89.0",         "sid": 3426, "tab": "gr"},
    {"name": "Cosmos Radio 93.0",        "sid": 1943, "tab": "gr"},
    {"name": "Creta Planet Radio",       "sid": 2671, "tab": "gr"},
    {"name": "Cretaone 102.3",           "sid": 4192, "tab": "gr"},
    {"name": "Derti 105.7",              "sid": 1766, "tab": "gr"},
    {"name": "DG Radio",                 "sid": 3021, "tab": "gr"},
    {"name": "DGradio One",              "sid": 3302, "tab": "gr"},
    {"name": "DJ Γρηγόρης 306",          "sid": 2996, "tab": "gr"},
    {"name": "Dream 96.9",               "sid": 90,   "tab": "gr"},
    {"name": "Dream FM 90.7",            "sid": 2178, "tab": "gr"},
    {"name": "Echo FM 97.4",             "sid": 1988, "tab": "gr"},
    {"name": "Echo FM 103.8",            "sid": 1079, "tab": "gr"},
    {"name": "EN Radio",                 "sid": 2576, "tab": "gr"},
    {"name": "Evros FM 100",             "sid": 1066, "tab": "gr"},
    {"name": "Fiesta FM 101.7",          "sid": 1044, "tab": "gr"},
    {"name": "FM 100 Patras",            "sid": 1143, "tab": "gr"},
    {"name": "For You Radio",            "sid": 3217, "tab": "gr"},
    {"name": "Galaxias 103",             "sid": 1025, "tab": "gr"},
    {"name": "Galaxy 106.1",             "sid": 781,  "tab": "gr"},
    {"name": "Gamma Radio 100",          "sid": 1050, "tab": "gr"},
    {"name": "Gold FM 100.3",            "sid": 2340, "tab": "gr"},
    {"name": "Grecia Radio",             "sid": 3048, "tab": "gr"},
    {"name": "Green Radio 88.8",         "sid": 3029, "tab": "gr"},
    {"name": "Gyalisma Radio",           "sid": 3197, "tab": "gr"},
    {"name": "Horizont FM 94.6",         "sid": 2382, "tab": "gr"},
    {"name": "I FM 103.4",               "sid": 2036, "tab": "gr"},
    {"name": "Idea FM 95.5",             "sid": 2105, "tab": "gr"},
    {"name": "Ikaros FM 97.5",           "sid": 1039, "tab": "gr"},
    {"name": "Ikaria Radio",             "sid": 3767, "tab": "gr"},
    {"name": "In FM 100.7",              "sid": 1395, "tab": "gr"},
    {"name": "Iris Radio 101.9",         "sid": 1081, "tab": "gr"},
    {"name": "Island FM 103.8",          "sid": 2084, "tab": "gr"},
    {"name": "Jukebox Radio",            "sid": 3218, "tab": "gr"},
    {"name": "K FM 100",                 "sid": 1165, "tab": "gr"},
    {"name": "Kardami FM 101.5",         "sid": 1038, "tab": "gr"},
    {"name": "Koukouvagia Radio",        "sid": 3350, "tab": "gr"},
    {"name": "Lambda FM 100.9",          "sid": 1097, "tab": "gr"},
    {"name": "Lido Radio",               "sid": 3407, "tab": "gr"},
    {"name": "Love Island Radio",        "sid": 3655, "tab": "gr"},
    {"name": "Mikrofono Radio",          "sid": 3196, "tab": "gr"},
    {"name": "Mix FM 101.8",             "sid": 1072, "tab": "gr"},
    {"name": "MixedGreek Radio",         "sid": 3558, "tab": "gr"},
    {"name": "Navarino Radio",           "sid": 3506, "tab": "gr"},
    {"name": "Omorfos Kosmos",           "sid": 3513, "tab": "gr"},
    {"name": "Oniro Radio",              "sid": 3044, "tab": "gr"},
    {"name": "Optiko Radio",             "sid": 3396, "tab": "gr"},
    {"name": "Orfeas Radio 105.5",       "sid": 1100, "tab": "gr"},
    {"name": "Petit Paris Radio",        "sid": 3462, "tab": "gr"},
    {"name": "Pigi FM 99.6",             "sid": 2395, "tab": "gr"},
    {"name": "Pontios Radio",            "sid": 3095, "tab": "gr"},
    {"name": "Prima FM 92.5",            "sid": 1078, "tab": "gr"},
    {"name": "Psifi Radio",              "sid": 3090, "tab": "gr"},
    {"name": "Pulse Radio 104.3",        "sid": 2035, "tab": "gr"},
    {"name": "Radio Diavlos",            "sid": 3498, "tab": "gr"},
    {"name": "Radio Ritmo",              "sid": 3456, "tab": "gr"},
    {"name": "Refresh Radio",            "sid": 3414, "tab": "gr"},
    {"name": "Rizes Radio",              "sid": 3145, "tab": "gr"},
    {"name": "Rodopi FM 101.7",          "sid": 1012, "tab": "gr"},
    {"name": "Solar Radio",              "sid": 3421, "tab": "gr"},
    {"name": "Souvlaki Radio",           "sid": 3505, "tab": "gr"},
    {"name": "Stylos FM",                "sid": 2384, "tab": "gr"},
    {"name": "Summer Radio",             "sid": 3454, "tab": "gr"},
    {"name": "Syn FM 97.7",              "sid": 1017, "tab": "gr"},
    {"name": "Takis Radio",              "sid": 3540, "tab": "gr"},
    {"name": "Taxideftis Radio",         "sid": 3507, "tab": "gr"},
    {"name": "Thetis Radio",             "sid": 3104, "tab": "gr"},
    {"name": "Typos FM 96.3",            "sid": 1023, "tab": "gr"},
    {"name": "Unity Radio",              "sid": 3378, "tab": "gr"},
    {"name": "Vigla FM 100.8",           "sid": 1008, "tab": "gr"},
    {"name": "Web Radio Ellas",          "sid": 3124, "tab": "gr"},
]


def get_stream(sid):
    """Fetch live24.gr station page and extract the stream URL from JS config."""
    url = f"https://live24.gr/radio/generic.jsp?sid={sid}"
    try:
        r = requests.get(url, headers=HEADERS, timeout=10)
        html = r.text

        # Primary pattern: streamsrc: 'URL'
        m = re.search(r"streamsrc\s*:\s*'([^']+)'", html)
        if m:
            return m.group(1).strip()

        # Fallback: stream: 'URL'
        m = re.search(r"[,\s]stream\s*:\s*'([^']+)'", html)
        if m:
            return m.group(1).strip()

        # Fallback 2: mobileStream (sometimes the only one present)
        m = re.search(r"mobileStream\s*:\s*'([^'-][^']+)'", html)
        if m and m.group(1) not in ('-1', ''):
            return m.group(1).strip()

        return None

    except requests.exceptions.Timeout:
        return "TIMEOUT"
    except Exception as e:
        return f"ERROR: {e}"


def main():
    results = []
    total = len(STATIONS)

    print(f"Extracting streams for {total} stations...")
    print("=" * 60)

    for i, station in enumerate(STATIONS, 1):
        sid  = station["sid"]
        name = station["name"]
        tab  = station["tab"]

        print(f"[{i:3}/{total}] {name} (sid={sid}) ... ", end="", flush=True)

        stream = get_stream(sid)

        status = "✓" if stream and not stream.startswith(("ERROR", "TIMEOUT", "None")) else "✗"
        print(f"{status} {stream or 'NOT FOUND'}")

        results.append({
            "name":   name,
            "sid":    sid,
            "tab":    tab,
            "stream": stream,
            "ok":     bool(stream and not stream.startswith(("ERROR", "TIMEOUT")))
        })

        time.sleep(0.8)  # polite delay

    # ── Save JSON ──
    with open("streams_found.json", "w", encoding="utf-8") as f:
        json.dump(results, f, ensure_ascii=False, indent=2)
    print("\n✓ Saved: streams_found.json")

    # ── Save readable TXT ──
    found     = [r for r in results if r["ok"]]
    not_found = [r for r in results if not r["ok"]]

    with open("streams_found.txt", "w", encoding="utf-8") as f:
        f.write(f"FOUND ({len(found)}/{total})\n{'='*60}\n")
        for r in found:
            f.write(f'{r["name"]:40} {r["stream"]}\n')
        f.write(f"\nNOT FOUND / ERROR ({len(not_found)})\n{'='*60}\n")
        for r in not_found:
            f.write(f'{r["name"]:40} sid={r["sid"]}\n')

    print(f"✓ Saved: streams_found.txt")
    print(f"\nSummary: {len(found)} streams found, {len(not_found)} not found")

    # ── Print JS snippet ready to paste into index.html ──
    print("\n" + "="*60)
    print("COPY-PASTE READY JS (for index.html):")
    print("="*60)
    for r in found:
        js_name = r['name'].replace("'", "\\'")
        print(f'  // {js_name}  (sid:{r["sid"]})')
        print(f'  stream: "{r["stream"]}",')


if __name__ == "__main__":
    main()
