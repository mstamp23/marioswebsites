<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Greek Radio Live ğŸµ</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --accent:#e8a838; --bg:#0d0d0d;
    --card:rgba(255,255,255,0.06); --card-h:rgba(255,255,255,0.12);
    --border:rgba(255,255,255,0.1); --text:#f0ece3; --muted:#aaa;
    --glow:0 0 25px rgba(232,168,56,0.3);
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  
  body { 
    font-family:'DM Sans', sans-serif; 
    background-color: var(--bg);
    /* Î¦ÎŸÎÎ¤ÎŸ - Background Image */
    background-image: linear-gradient(rgba(13,13,13,0.85), rgba(13,13,13,0.85)), 
                      url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?auto=format&fit=crop&w=1600&q=80');
    background-attachment: fixed;
    background-size: cover;
    color: var(--text);
    min-height: 100vh;
  }

  header { padding:50px 20px; text-align:center; }
  h1 { font-family:'Syne', sans-serif; font-size:2.5rem; color:var(--accent); text-transform:uppercase; letter-spacing:2px; }

  .container { max-width:1300px; margin:0 auto; padding:0 20px 120px; }
  
  /* Category Styling */
  .category-title { 
    font-family:'Syne', sans-serif;
    font-size: 1.6rem; 
    margin: 40px 0 20px; 
    padding-bottom: 10px;
    border-bottom: 2px solid var(--accent);
    display: inline-block;
    color: #fff;
  }

  .grid { 
    display:grid; 
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
    gap:20px; 
  }

  .card { 
    background: var(--card); 
    backdrop-filter: blur(10px);
    border: 1px solid var(--border); 
    border-radius: 20px; 
    padding: 25px 15px; 
    cursor: pointer; 
    transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    text-align: center;
  }
  .card:hover { background: var(--card-h); transform: translateY(-5px); border-color: var(--accent); }
  .card.playing { border-color: var(--accent); box-shadow: var(--glow); background: rgba(232,168,56,0.15); }

  .ico { font-size:2.5rem; margin-bottom:12px; display:block; }
  .name { font-weight:700; font-size:1rem; min-height: 2.4em; display: flex; align-items: center; justify-content: center; }

  /* Notification Player Bar */
  #np-bar { 
    position:fixed; bottom:-100px; left:0; width:100%; 
    background: rgba(20,20,20,0.9); backdrop-filter: blur(20px); 
    border-top:1px solid var(--border); padding:20px; 
    transition: 0.4s ease-in-out; z-index:1000; 
    display:flex; align-items:center; justify-content:space-between; 
  }
  #np-bar.on { bottom:0; }
  .np-name { font-weight:800; color:var(--accent); font-size:1.1rem; }
  .btn-stop { background:var(--accent); border:none; color:#000; font-weight:800; padding:10px 25px; border-radius:30px; cursor:pointer; }

  /* Hidden loader */
  #loader { width:20px; height:20px; border:3px solid #333; border-top-color:var(--accent); border-radius:50%; animation:spin 1s linear infinite; display:none; margin-right:15px; }
  @keyframes spin { to { transform:rotate(360deg); } }
</style>
</head>
<body>

<header>
  <h1>Radio Streaming 2026</h1>
</header>

<div class="container">
  <h2 class="category-title">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</h2>
  <div id="grid-gr" class="grid"></div>

  <h2 class="category-title">ğŸŒ Î”Î¹ÎµÎ¸Î½Î®Ï‚ Î¼Î¿Ï…ÏƒÎ¹ÎºÎ®</h2>
  <div id="grid-int" class="grid"></div>
</div>

<div id="np-bar">
  <div style="display:flex; align-items:center;">
    <div id="loader"></div>
    <div>
      <small style="color:var(--muted); text-transform:uppercase;">Playing:</small>
      <div id="np-name" class="np-name">-</div>
    </div>
  </div>
  <button class="btn-stop" onclick="stopAll()">STOP</button>
</div>

<audio id="player"></audio>

<script>
let allData = [];
const player = document.getElementById('player');
const npbar = document.getElementById('np-bar');
const npname = document.getElementById('np-name');
const loader = document.getElementById('loader');
let curCard = null;

async function init() {
  try {
    // Replace with your exact filename on GitHub
    const res = await fetch('streams_found (copy 1).json');
    allData = await res.json();
    
    // Separate and Render
    const greek = allData.filter(s => s.tab === 'gr' && s.ok);
    const international = allData.filter(s => s.tab === 'int' && s.ok);
    
    renderGrid(greek, 'grid-gr');
    renderGrid(international, 'grid-int');
  } catch (e) {
    console.error("Error loading JSON:", e);
  }
}

function renderGrid(list, elementId) {
  const grid = document.getElementById(elementId);
  list.forEach(s => {
    const card = document.createElement('div');
    card.className = 'card';
    const icon = s.tab === 'int' ? 'ğŸ“»' : 'ğŸµ';
    
    card.innerHTML = `
      <span class="ico">${icon}</span>
      <div class="name">${s.name}</div>
    `;
    
    card.addEventListener('click', () => playStation(card, s));
    grid.appendChild(card);
  });
}

async function playStation(card, s) {
  if (card.classList.contains('playing')) {
    stopAll();
    return;
  }

  stopAll();
  curCard = card;
  card.classList.add('playing');
  npname.textContent = s.name;
  npbar.classList.add('on');
  loader.style.display = 'block';

  // Primary -> Fallback logic
  try {
    await attemptStream(s.stream);
  } catch (e) {
    if (s.fallback && s.fallback !== "-1") {
      try {
        await attemptStream(s.fallback);
      } catch (e2) {
        handleError();
      }
    } else {
      handleError();
    }
  }
}

async function attemptStream(url) {
  player.src = url;
  player.load();
  return player.play().then(() => loader.style.display = 'none');
}

function stopAll() {
  player.pause();
  player.src = "";
  if (curCard) curCard.classList.remove('playing');
  npbar.classList.remove('on');
  loader.style.display = 'none';
}

function handleError() {
  loader.style.display = 'none';
  npname.textContent = "Offline / Error";
  setTimeout(stopAll, 3000);
}

init();
</script>
</body>
</html>
